<div class="search-div" fxLayout="row" fxLayoutAlign="end end">
	<button mat-raised-button color="warn" (click)="openDialog()"><mat-icon>add</mat-icon>Cargar JSON</button>
</div>
<form class="buscar">
	<mat-form-field class="full-with" appearance="fill">
		<input matInput (keyup)="applyFilter($event)" placeholder="Buscar DTE Proveedor" #input />
	</mat-form-field>
</form>

<mat-table [dataSource]="listArticulo" matSort class="mat-elevation-z8 demo-table">
	<ng-container matColumnDef="fechaEmision">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Fecha Emi.</mat-header-cell>
		<mat-cell *matCellDef="let element">
			{{ element.fechaemision | date: 'd-M-yyyy' }}
		</mat-cell>
	</ng-container>
	<ng-container matColumnDef="tipoDte">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Tipo DTE</mat-header-cell>
		<mat-cell *matCellDef="let element">{{ element.tipoDoc | tipoDoc }}</mat-cell>
	</ng-container>

	<ng-container matColumnDef="numeroControl">
		<mat-header-cell *matHeaderCellDef mat-sort-header>NÃºmero Control</mat-header-cell>
		<mat-cell *matCellDef="let element">{{ element.Dte }}</mat-cell>
	</ng-container>
	<ng-container matColumnDef="selloRecibido">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Sello Recibido</mat-header-cell>
		<mat-cell
			*matCellDef="let element"
			[ngStyle]="{ 'background-color': element.selloRecibido === 'ND' ? 'red' : '' }"
			>{{ element.selloRecibido }}</mat-cell
		>
	</ng-container>
	<ng-container matColumnDef="estado">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Estado</mat-header-cell>
		<mat-cell
			*matCellDef="let element"
			[ngStyle]="{ 'background-color': element.procesado === true ? '#196F3D' : 'red' }"
			>{{ element.procesado | docEstado }}</mat-cell
		>
	</ng-container>
	<ng-container matColumnDef="nombreEmisor">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Nombre de Emisior</mat-header-cell>
		<mat-cell *matCellDef="let element">{{ element.nombre }}</mat-cell>
	</ng-container>
	<ng-container matColumnDef="documentoEmisor">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Nit</mat-header-cell>
		<mat-cell *matCellDef="let element">{{ element.Documento }}</mat-cell>
	</ng-container>
	<ng-container matColumnDef="montoTotal">
		<mat-header-cell *matHeaderCellDef mat-sort-header>Monto</mat-header-cell>
		<mat-cell *matCellDef="let element">{{ element.montoTotal | currency }}</mat-cell>
	</ng-container>
	<ng-container matColumnDef="actions">
		<mat-header-cell *matHeaderCellDef>Accion</mat-header-cell>

		<mat-cell *matCellDef="let element">
			<button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
				<mat-icon>more_vert</mat-icon>
			</button>

			<mat-menu #menu="matMenu">
				<div *ngIf="element.procesado === false">
					<button mat-menu-item (click)="clickEdit(element)">
						<mat-icon>edit</mat-icon>
						<span>Agregar Sello Recibido</span>
					</button>

					<div *ngIf="element.selloRecibido !== 'ND'">
						<button mat-menu-item (click)="clickCP(element)">
							<mat-icon>note</mat-icon>
							<span>Aplicar CP </span>
						</button>
						<button mat-menu-item (click)="clickCB(element)">
							<mat-icon>note</mat-icon>
							<span>Aplicar CH sin Vale </span>
						</button>
						<button mat-menu-item (click)="clickCH(element)">
							<mat-icon>note</mat-icon>
							<span>Aplicar CH Con Vale </span>
						</button>
					</div>
				</div>
			</mat-menu>
		</mat-cell>
	</ng-container>

	<mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
	<mat-row *matRowDef="let row; columns: displayedColumns"></mat-row>
	<tr class="mat-row" *matNoDataRow>
		<td class="mat-cell" colspan="4">No data matching the filter "{{ input.value }}"</td>
	</tr>
</mat-table>
<mat-paginator
	[pageSizeOptions]="[5, 10, 25, 75, 100]"
	[pageIndex]="0"
	pageSize="10"
	showFirstLastButtons
></mat-paginator>
